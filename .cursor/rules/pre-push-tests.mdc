---
description: Mandatory quality gates before git push or PR creation
alwaysApply: true
---

# Pre-Push / Pre-PR Quality Gates

Before executing `git push`, `gh pr create`, or any command that sends commits to a remote, you MUST pass ALL quality gates below. No exceptions.

## Required Gates

Run these sequentially. ALL must exit 0 before proceeding.

```bash
# 1. Python lint (from repo root, inside venv)
cd /Users/jd/side/graphrag-architect && source .venv/bin/activate && pylint orchestrator/

# 2. Python tests (from repo root, inside venv)
python -m pytest orchestrator/tests/ -v

# 3. Go tests (from Go module root)
cd /Users/jd/side/graphrag-architect/workers/ingestion && go test ./... -v -count=1 -timeout 30s

# 4. Go lint (from Go module root)
cd /Users/jd/side/graphrag-architect/workers/ingestion && golangci-lint run ./...
```

## Rules

- If ANY gate fails, STOP. Do not push or create a PR.
- Fix the failure first, re-run ALL gates from the top, then proceed.
- Never skip, disable, or mark tests as expected-failure to bypass a gate.
- Never add pylint disable comments to bypass lint â€” fix the code or update pyproject.toml if the rule is genuinely inappropriate.
- Always include the raw output in your response so the user can verify.
- When reporting results, state: "Pylint: X/10, Python tests: A/B passed, Go tests: C/D passed, Go lint: clean/N issues".

## Setup Prerequisites

If the venv, pylint, or Go module is missing, set them up first:

```bash
# Python venv (one-time)
python3 -m venv .venv
source .venv/bin/activate
pip install -r orchestrator/requirements.txt pytest pytest-asyncio pylint

# Go deps (one-time, from workers/ingestion/)
go mod tidy
```
